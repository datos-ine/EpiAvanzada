<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Errores y advertencias en R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#errores-comunes-en-r" id="toc-errores-comunes-en-r" class="nav-link active" data-scroll-target="#errores-comunes-en-r">Errores comunes en R</a>
  <ul class="collapse">
  <li><a href="#errores-de-sintaxis" id="toc-errores-de-sintaxis" class="nav-link" data-scroll-target="#errores-de-sintaxis">Errores de sintaxis</a></li>
  <li><a href="#errores-de-objeto-no-encontrado" id="toc-errores-de-objeto-no-encontrado" class="nav-link" data-scroll-target="#errores-de-objeto-no-encontrado">Errores de objeto no encontrado</a></li>
  <li><a href="#otros-tipos-de-error" id="toc-otros-tipos-de-error" class="nav-link" data-scroll-target="#otros-tipos-de-error">Otros tipos de error</a></li>
  </ul></li>
  <li><a href="#advertencias-en-r" id="toc-advertencias-en-r" class="nav-link" data-scroll-target="#advertencias-en-r">Advertencias en R</a></li>
  <li><a href="#solución-de-errores" id="toc-solución-de-errores" class="nav-link" data-scroll-target="#solución-de-errores">Solución de errores</a></li>
  <li><a href="#pedido-de-ayuda-en-foros" id="toc-pedido-de-ayuda-en-foros" class="nav-link" data-scroll-target="#pedido-de-ayuda-en-foros">Pedido de ayuda en foros</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Errores y advertencias en R</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><span class="text" style="display: block; text-align: center;">Este material es parte de la <strong>Unidad 1 del Curso de Epidemiología - Nivel Avanzado del Instituto Nacional de Epidemiología “Dr.&nbsp;Juan H. Jara” - ANLIS</strong></span></p>
<section id="errores-comunes-en-r" class="level2">
<h2 class="anchored" data-anchor-id="errores-comunes-en-r">Errores comunes en R</h2>
<p>Los mensajes de error ocurren cuando <code>R</code> no puede completar la ejecución de un comando. Para ilustrar los errores más comunes usaremos el dataset de ejemplo <code>who2</code> que viene incluido en la ayuda de <code>tidyverse</code>, que contiene información por año, país y grupos etarios del <em>Informe Global sobre la Tuberculosis de la Organización Mundial de la Salud</em> (WHO por sus siglas en inglés).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Carga datos</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"who2"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Nombres de columnas</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(who2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "country"    "year"       "sp_m_014"   "sp_m_1524"  "sp_m_2534" 
 [6] "sp_m_3544"  "sp_m_4554"  "sp_m_5564"  "sp_m_65"    "sp_f_014"  
[11] "sp_f_1524"  "sp_f_2534"  "sp_f_3544"  "sp_f_4554"  "sp_f_5564" 
[16] "sp_f_65"    "sn_m_014"   "sn_m_1524"  "sn_m_2534"  "sn_m_3544" 
[21] "sn_m_4554"  "sn_m_5564"  "sn_m_65"    "sn_f_014"   "sn_f_1524" 
[26] "sn_f_2534"  "sn_f_3544"  "sn_f_4554"  "sn_f_5564"  "sn_f_65"   
[31] "ep_m_014"   "ep_m_1524"  "ep_m_2534"  "ep_m_3544"  "ep_m_4554" 
[36] "ep_m_5564"  "ep_m_65"    "ep_f_014"   "ep_f_1524"  "ep_f_2534" 
[41] "ep_f_3544"  "ep_f_4554"  "ep_f_5564"  "ep_f_65"    "rel_m_014" 
[46] "rel_m_1524" "rel_m_2534" "rel_m_3544" "rel_m_4554" "rel_m_5564"
[51] "rel_m_65"   "rel_f_014"  "rel_f_1524" "rel_f_2534" "rel_f_3544"
[56] "rel_f_4554" "rel_f_5564" "rel_f_65"  </code></pre>
</div>
</div>
<section id="errores-de-sintaxis" class="level3">
<h3 class="anchored" data-anchor-id="errores-de-sintaxis">Errores de sintaxis</h3>
<p>Los errores de sintaxis ocurren cuando una parte del código está mal escrito o incompleto, impidiendo la ejecución del comando.</p>
<ul>
<li>Por ejemplo, si al escribir una función olvidamos el paréntesis de cierre:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>who2 <span class="sc">%&gt;%</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Argentina"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(sp_m_2534, <span class="at">na.rm =</span> T</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error: &lt;text&gt;:4:0: unexpected end of input
2:   filter(country == "Argentina") %&gt;% 
3:   mean(sp_m_2534, na.rm = T
  ^</code></pre>
</div>
</div>
<ul>
<li>O el de apertura:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>who2 <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Argentina"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  mean sp_m_2534, na.rm <span class="ot">=</span> T<span class="er">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error: &lt;text&gt;:3:8: unexpected symbol
2:   filter(country == "Argentina") %&gt;% 
3:   mean sp_m_2534
          ^</code></pre>
</div>
</div>
<ul>
<li>Podemos haber colocado un paréntesis extra:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>who2 <span class="sc">%&gt;%</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Argentina"</span>)<span class="er">)</span> <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(sp_m_2534, <span class="at">na.rm =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error: &lt;text&gt;:2:33: unexpected ')'
1: who2 %&gt;% 
2:   filter(country == "Argentina"))
                                   ^</code></pre>
</div>
</div>
<ul>
<li>También podemos haber olvidado encerrar entre comillas una cadena de texto:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>who2 <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> Argentina) <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(sp_m_2534, <span class="at">na.rm =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in `filter()`:
ℹ In argument: `country == Argentina`.
Caused by error:
! object 'Argentina' not found</code></pre>
</div>
</div>
<ul>
<li>O haber dejado las comillas sin cerar:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>who2 <span class="sc">%&gt;%</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Argentina) %&gt;% </span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="st">  mean(sp_m_2534, na.rm = T)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error: &lt;text&gt;:2:21: unexpected INCOMPLETE_STRING
2:   filter(country == "Argentina) %&gt;% 
3:   mean(sp_m_2534, na.rm = T)
                       ^</code></pre>
</div>
</div>
<ul>
<li>Es posible que hayamos dejado un operador <em>pipe</em> <code>%&gt;%</code> abierto al terminar de escribir el código:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>who2 <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Argentina"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(sp_m_2534, <span class="at">na.rm =</span> T) <span class="sc">%&gt;%</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error: &lt;text&gt;:4:0: unexpected end of input
2:   filter(country == "Argentina") %&gt;% 
3:   mean(sp_m_2534, na.rm = T) %&gt;% 
  ^</code></pre>
</div>
</div>
<ul>
<li>A veces escribimos incorrectamente el nombre de la función:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>who2 <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Argentina"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">means</span>(sp_m_2534, <span class="at">na.rm =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in means(., sp_m_2534, na.rm = T): could not find function "means"</code></pre>
</div>
</div>
<ul>
<li>O el nombre del objeto (recordar que <code>R</code> es sensible a mayúsculas y minúsculas)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>Who2 <span class="sc">%&gt;%</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Argentina"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(sp_m_2534, <span class="at">na.rm =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'Who2' not found</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>WHO2 <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Argentina"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(sp_m_2534, <span class="at">na.rm =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'WHO2' not found</code></pre>
</div>
</div>
<ul>
<li>O se nos olvida separar por comas los argumentos:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>who2 <span class="sc">%&gt;%</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Argentina"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(sp_m_2534 <span class="at">na.rm =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error: &lt;text&gt;:3:18: unexpected symbol
2:   filter(country == "Argentina") %&gt;% 
3:   mean(sp_m_2534 na.rm
                    ^</code></pre>
</div>
</div>
<ul>
<li>También generamos error si colocamos el asignador <code>&lt;-</code> en sentido contrario:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>who_arg <span class="ot">-&gt;</span> who2 <span class="sc">%&gt;%</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Argentina"</span>) <span class="sc">%&gt;%</span>    </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(sp_m_2534, <span class="at">na.rm =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'who_arg' not found</code></pre>
</div>
</div>
<ul>
<li>O si lo escribimos de forma incorrecta:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>who_arg <span class="sc">&gt;-</span> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  who2 <span class="sc">%&gt;%</span>  </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Argentina"</span>) <span class="sc">%&gt;%</span>    </span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(sp_m_2534, <span class="at">na.rm =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'who_arg' not found</code></pre>
</div>
</div>
<ul>
<li>En algunos casos podemos haber escrito un comentario de texto en varias líneas y olvidado anteponer el <code>#</code> al empezar cada línea:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Crea objeto con la media de casos para hombres de entre </span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="dv">25</span> y <span class="dv">34</span> años residentes en Argentina</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>who_arg <span class="sc">&gt;-</span> </span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  who2 <span class="sc">%&gt;%</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Argentina"</span>) <span class="sc">%&gt;%</span>    </span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(sp_m_2534, <span class="at">na.rm =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error: &lt;text&gt;:2:4: unexpected symbol
1: # Crea objeto con la media de casos para hombres de entre 
2: 25 y
      ^</code></pre>
</div>
</div>
</section>
<section id="errores-de-objeto-no-encontrado" class="level3">
<h3 class="anchored" data-anchor-id="errores-de-objeto-no-encontrado">Errores de objeto no encontrado</h3>
<p>Ocurren cuando el código hace referencia a un objeto no cargado en el entorno de trabajo actual.</p>
<ul>
<li>Un ejemplo típico es cuando intentamos usar una función de un paquete que no cargamos:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>who2 <span class="sc">%&gt;%</span> </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Argentina"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(sp_m_2534, <span class="at">na.rm =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">flextable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in flextable(.): could not find function "flextable"</code></pre>
</div>
</div>
<ul>
<li>O si llamamos una variable que no existe en el entorno</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>who2 <span class="sc">%&gt;%</span> </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Argentina"</span> <span class="sc">&amp;</span> gender <span class="sc">==</span> <span class="st">"M"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(sp_m_2534, <span class="at">na.rm =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in `filter()`:
ℹ In argument: `country == "Argentina" &amp; gender == "M"`.
Caused by error:
! object 'gender' not found</code></pre>
</div>
</div>
<ul>
<li>Puede ser también que estemos escribiendo mal el nombre de la variable:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>who2 <span class="sc">%&gt;%</span> </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">==</span> <span class="st">"Argentina"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(sp_m_2534, <span class="at">na.rm =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in `filter()`:
ℹ In argument: `Country == "Argentina"`.
Caused by error:
! object 'Country' not found</code></pre>
</div>
</div>
</section>
<section id="otros-tipos-de-error" class="level3">
<h3 class="anchored" data-anchor-id="otros-tipos-de-error">Otros tipos de error</h3>
<p>Suelen estar relacionado a causas más complejas, como ser problemas de lógica, operaciones no válidas, errores de tipo de datos o errores en la instalación de paquetes.</p>
</section>
</section>
<section id="advertencias-en-r" class="level2">
<h2 class="anchored" data-anchor-id="advertencias-en-r">Advertencias en R</h2>
<p>A diferencia de los errores, las advertencias permiten continuar con la ejecución del código pero alertan sobre posibles problemas o situaciones inusuales.</p>
<p>Uno de los más frecuentes es cuando queremos usar funciones que van a quedar obsoletas o están difuntas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dlookr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'dlookr' was built under R version 4.3.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Registered S3 methods overwritten by 'dlookr':
  method          from  
  plot.transform  scales
  print.transform scales</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dlookr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:tidyr':

    extract</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:base':

    transform</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>who2 <span class="sc">%&gt;%</span> </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"sp_m"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_correlate</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'plot_correlate' is deprecated.
Use 'plot.correlate' instead.
See help("Deprecated")</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="solución-de-errores" class="level2">
<h2 class="anchored" data-anchor-id="solución-de-errores">Solución de errores</h2>
<p>A veces los errores y advertencias ocurren cuando la memoria interna está saturada porque tenemos demasiados paquetes y objetos cargados o porque nos quedaron cosas abiertas de sesiones anteriores. Un primer paso entonces es realizar lo siguiente:</p>
<ul>
<li><p>Reiniciar sesión de <code>R</code> desde el menú <code>Session: Restart R</code> o con el atajo de teclado <code>CTRL + SHIFT + F10</code>.</p></li>
<li><p>Si quedaran objetos abiertos en el environment, limpiar el mismo apretando el ícono de la escoba o escribiendo en la consola el comando <code>rm(list = ls())</code>.</p></li>
<li><p>Apretar el botón que indica el uso de memoria (a la izquierda del ícono de la escoba) y seleccionar la opción <code>Free Unused R Memory</code>.</p></li>
</ul>
<p>Si el problema persiste pasaremos a revisar nuestro código exhaustivamente a fin de detectar posibles errores de sintaxis o de objeto no encontrado. RStudio suele marcarnos los errores de código subrayando en rojo el lugar dónde se encuentra el símbolo faltante o sobrante y colocando una X roja en el número de línea correspondiente.</p>
<p>Si al revisar el código no encontramos la fuente del error/advertencia, podemos acceder a la ayuda de la función de las siguientes formas:</p>
<ul>
<li><p>Consultar la documentación de la función entrando a la ayuda del paquete correspondiente desde la solapa <code>Packages</code> y buscando el nombre de la función que nos genera el problema.</p></li>
<li><p>Ejecutando en la consola <code>?nombre_de_la_función</code> (por ejemplo <code>?mean</code>), o bien posicionando el cursor sobre la función y presionando la tecla <code>F1</code>.</p></li>
<li><p>Buscando online la documentación del paquete.</p></li>
</ul>
<p>Cuando siguiendo los pasos anteriores no pudimos identificar ni resolver el problema, podemos solicitar ayuda online en alguno de los siguientes recursos:</p>
<ul>
<li><p>Foro del <a href="http://capacitacion.anlis.gob.ar/mod/forum/view.php?id=8083">curso de Avanzada</a> (recomendada)</p></li>
<li><p>Buscar el mensaje de error en el buscador de Google</p></li>
<li><p>Herramientas de inteligencia artificial como <a href="https://chatgpt.com/">ChatGPT</a>, <a href="https://gemini.google.com/">Gemini</a>, etc. (no recomendable para usuarios/as principiantes)</p></li>
<li><p>Foros específicos de R como <a href="https://stackexchange.com/">Stack Exchange</a>, <a href="https://stackoverflow.com/">Stack Overflow</a>, o de R para Salud Pública como <a href="https://appliedepi.org/community/">Comunidad AppliedEpi</a> (antes de postear en cualquiera de estos foros, buscar si otra persona no posteó anteriormente el mismo problema)</p></li>
</ul>
</section>
<section id="pedido-de-ayuda-en-foros" class="level2">
<h2 class="anchored" data-anchor-id="pedido-de-ayuda-en-foros">Pedido de ayuda en foros</h2>
<p>Antes de publicar un mensaje de ayuda en cualquier foro, debemos aprender a contextualizar el problema para que otras personas puedan indicarnos posibles soluciones. Algunos de los pasos a seguir al elaborar un posteo son los siguientes:</p>
<ol type="1">
<li>Describe el problema de manera clara y concisa</li>
<li>Proporciona todos los detalles relevantes: el código que estás utilizando, los errores que estás recibiendo y cualquier intento que hayas hecho para resolver el problema por tu cuenta.</li>
<li>Proporciona información adicional como el sistema operativo que estás usando, la capacidad de almacenamiento en disco y de memoria RAM, si estás usando una red de uso limitado, etc.</li>
<li>Adjunta capturas de pantalla del error</li>
</ol>
<p>En el foro del <a href="http://capacitacion.anlis.gob.ar/mod/forum/view.php?id=8083">curso de Avanzada</a> todos trabajaremos con los mismos datasets ficticios creados con fines educativos. Sin embargo, por lo general en Epidemiología y Salud Pública nos encontramos con datasets con información sensible tales como el nombre y apellido, DNI, domicilio o teléfono de los participantes de un estudio y no podemos publicar esos datos en cualquier parte.</p>
<p>En estos casos, podemos crear un set de datos ficticio con las mismas características que el real o solamente seleccionar algunas columnas y filas que no contengan información que pueda llevar a la identificación del paciente/participante. Por ejemplo, con la base de la WHO que vimos anteriormente, generamos un dataset mínimo de 6 filas y 8 columnas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>who2 <span class="sc">%&gt;%</span> </span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Argentina"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, <span class="fu">starts_with</span>(<span class="st">"sp_m"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 8
   year sp_m_014 sp_m_1524 sp_m_2534 sp_m_3544 sp_m_4554 sp_m_5564 sp_m_65
  &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
1  1980       NA        NA        NA        NA        NA        NA      NA
2  1981       NA        NA        NA        NA        NA        NA      NA
3  1982       NA        NA        NA        NA        NA        NA      NA
4  1983       NA        NA        NA        NA        NA        NA      NA
5  1984       NA        NA        NA        NA        NA        NA      NA
6  1985       NA        NA        NA        NA        NA        NA      NA</code></pre>
</div>
</div>
<p>Sin embargo, si se tratara de datos reales, deberíamos presentarlos de alguna forma que permita a otros usuarios/as reproducir el error. Para estos casos, existen paquetes tales como <code>datapasta</code> y <code>reprex</code>, que permiten crear ejemplos mínimos reproducibles (REPREX por sus siglas en inglés):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creamos el conjunto de datos ficticios</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(datapasta)</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>datos <span class="ot">&lt;-</span> who2 <span class="sc">%&gt;%</span> </span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Argentina"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, <span class="fu">starts_with</span>(<span class="st">"sp_m"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dpasta</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Al ejecutar el comando dpasta(), nuestro código se transforma de la siguiente manera:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(datapasta)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>datos <span class="ot">&lt;-</span> who2 <span class="sc">%&gt;%</span> </span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Argentina"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, <span class="fu">starts_with</span>(<span class="st">"sp_m"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dpasta</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble::tribble(
  ~year, ~sp_m_014, ~sp_m_1524, ~sp_m_2534, ~sp_m_3544, ~sp_m_4554, ~sp_m_5564, ~sp_m_65,
   1980,        NA,         NA,         NA,         NA,         NA,         NA,       NA,
   1981,        NA,         NA,         NA,         NA,         NA,         NA,       NA,
   1982,        NA,         NA,         NA,         NA,         NA,         NA,       NA,
   1983,        NA,         NA,         NA,         NA,         NA,         NA,       NA,
   1984,        NA,         NA,         NA,         NA,         NA,         NA,       NA,
   1985,        NA,         NA,         NA,         NA,         NA,         NA,       NA
  )</code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>tibble<span class="sc">::</span><span class="fu">tribble</span>(</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>year, <span class="sc">~</span>sp_m_014, <span class="sc">~</span>sp_m_1524, <span class="sc">~</span>sp_m_2534, <span class="sc">~</span>sp_m_3544, <span class="sc">~</span>sp_m_4554, <span class="sc">~</span>sp_m_5564, <span class="sc">~</span>sp_m_65,</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>   <span class="dv">1980</span>,        <span class="cn">NA</span>,         <span class="cn">NA</span>,         <span class="cn">NA</span>,         <span class="cn">NA</span>,         <span class="cn">NA</span>,         <span class="cn">NA</span>,       <span class="cn">NA</span>,</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>   <span class="dv">1981</span>,        <span class="cn">NA</span>,         <span class="cn">NA</span>,         <span class="cn">NA</span>,         <span class="cn">NA</span>,         <span class="cn">NA</span>,         <span class="cn">NA</span>,       <span class="cn">NA</span>,</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>   <span class="dv">1982</span>,        <span class="cn">NA</span>,         <span class="cn">NA</span>,         <span class="cn">NA</span>,         <span class="cn">NA</span>,         <span class="cn">NA</span>,         <span class="cn">NA</span>,       <span class="cn">NA</span>,</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>   <span class="dv">1983</span>,        <span class="cn">NA</span>,         <span class="cn">NA</span>,         <span class="cn">NA</span>,         <span class="cn">NA</span>,         <span class="cn">NA</span>,         <span class="cn">NA</span>,       <span class="cn">NA</span>,</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>   <span class="dv">1984</span>,        <span class="cn">NA</span>,         <span class="cn">NA</span>,         <span class="cn">NA</span>,         <span class="cn">NA</span>,         <span class="cn">NA</span>,         <span class="cn">NA</span>,       <span class="cn">NA</span>,</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>   <span class="dv">1985</span>,        <span class="cn">NA</span>,         <span class="cn">NA</span>,         <span class="cn">NA</span>,         <span class="cn">NA</span>,         <span class="cn">NA</span>,         <span class="cn">NA</span>,       <span class="cn">NA</span></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 8
   year sp_m_014 sp_m_1524 sp_m_2534 sp_m_3544 sp_m_4554 sp_m_5564 sp_m_65
  &lt;dbl&gt; &lt;lgl&gt;    &lt;lgl&gt;     &lt;lgl&gt;     &lt;lgl&gt;     &lt;lgl&gt;     &lt;lgl&gt;     &lt;lgl&gt;  
1  1980 NA       NA        NA        NA        NA        NA        NA     
2  1981 NA       NA        NA        NA        NA        NA        NA     
3  1982 NA       NA        NA        NA        NA        NA        NA     
4  1983 NA       NA        NA        NA        NA        NA        NA     
5  1984 NA       NA        NA        NA        NA        NA        NA     
6  1985 NA       NA        NA        NA        NA        NA        NA     </code></pre>
</div>
</div>
<p>Asignamos el código generado al objeto <code>datos</code> y con esto ya contamos con un dataset mínimo para que otra persona pueda reproducir el mensaje de error. Para opciones más avanzadas de como compartir ejemplos mínimos reproducibles, pueden consultar la documentación del paquete <code>reprex</code>.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Importante
</div>
</div>
<div class="callout-body-container callout-body">
<p>Recuerden publicar sus consultas en el foro de ayuda del curso, en lugar de escribir a los/as docentes por mensajes privados. De esta forma, podemos ayudar a otros/as estudiantes que presenten problemas similares y enriquecer el proceso de aprendizaje.</p>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>